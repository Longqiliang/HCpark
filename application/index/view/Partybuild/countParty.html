{extend name="public/common"}

{block name="style"}
<style>
    body{
        background-color: #f0eff5;
    }
    /*卡片样式*/
    .card{
        position: relative;
        margin:10.5vw 2.4vw 0;
        padding: 4vw 2.66vw 0;
        font-size: 1.5rem;
        border-radius: 5px;
        background-color: #fff;
    }
    .card-tit:before{
        content: '';
        position: absolute;
        left:-20px ;
        top: -6px;
        width: 14px;
        height: 18px;
        background: url("/index/images/service/card/icon-star.png") 0 0 no-repeat;
        background-size:contain ;
    }
    .card-tit{
        height: 8vw;
        position: absolute;
        top:-4vw;
        width: 29.3vw;
        transform: translateX(-50%);
        left: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #fff;
        border-radius: 100px;
        font-size: 1.7rem;
        color: #fcc44b;
        box-shadow: 0 2px 4px #e8e8e8;;
    }
    .card-tit:after{
        content: '';
        position: absolute;
        right:-20px ;
        top: -6px;
        width: 14px;
        height: 18px;
        background: url("/index/images/service/card/icon-star.png") 0 0 no-repeat;
        background-size:contain ;
        -webkit-transform: rotateY(180deg);
        transform: rotateY(180deg);
    }
    .card-cell{
        min-height: 49px;
        border-bottom: 1px solid #f1f1f1;
        display: flex;
        justify-content: space-between;
        align-items: center;

    }
    .my-party-sum{
        padding: 1rem;
        display: block;
        text-align: center;
        font-size: 4rem;
        font-weight: bold;
    }
    #app{
        padding-bottom: 2rem;
    }
</style>
{/block}

{block name="body"}
<div id="app">
    <div class="card">
        <div class="card-tit">党支部总数</div>
        <div class="my-card-box"><span class="my-party-sum">16</span></div>
    </div>
    <div class="card">
        <div class="card-tit">年龄分布</div>
        <div class="my-card-box">
            <div id="age" style="width: 100%;height:100vw;"></div>
        </div>
    </div>
    <div class="card">
        <div class="card-tit">男女比例</div>
        <div class="my-card-box">
            <div id="gender" style="width: 100%;height:100vw;"></div>
        </div>
    </div>
    <div class="card">
        <div class="card-tit">学历分布</div>
        <div class="my-card-box">
            <div id="education" style="width: 100%;height:100vw;"></div>
        </div>
    </div>
</div>
{/block}

{block name="script"}
<script src="/static/echarts/echarts.min.js"></script>
<script>
    // 基于准备好的dom，初始化echarts实例
    var ageData={$data};
    var myAge = echarts.init(document.getElementById('age'));
    var myGender = echarts.init(document.getElementById('gender'));
    var myEducation = echarts.init(document.getElementById('education'));
    // 指定图表的配置项和数据  age
    var ageOption = {
        title: {text: '年龄分布'},
        tooltip : {
            trigger: 'item',
            formatter: "{a}{b}"
        },
        legend: {
            // orient: 'vertical',
            // top: 'middle',
            bottom: 10,
            left: 'center',
            data:['年龄分布'],
                normal: {
                    show: true,
                    position: 'top'
                }
        },
        color:['#fcc44b','#2f4554', '#61a0a8', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074', '#546570', '#c4ccd3'],
        xAxis: {
            data: ["20岁以下","20-30岁","30-40岁","40-50岁","50岁以上"],
            axisLabel:{
                interval:0,//横轴信息全部显示
                rotate:50,//倾斜显示 角度
                margin:10,//文字到x轴间距
                textStyle:{
                    color:'#666'
                },
            },
            axisLine:{
                lineStyle:{
                    color:'#f1f1f1'
                },
            }
        },
        yAxis: {
            type:'value',
            axisLabel:{
                textStyle:{
                    color:'#666'
                },
            },
            axisLine:{
                lineStyle:{
                    color:'#f1f1f1'
                },
            }
        },
        series: [{
            name: '人数',
            type: 'bar',
            data: ageData,
            label: {
                normal: {
                    show: true,
                    position: 'top'
                }
            },
        }]
    };
    // 指定图表的配置项和数据  age
    var educationOption = {
        title: {text: '学历分布',x:'center',y:'center'},
        tooltip: {},
        legend: {
            data:['学历分布'],
            normal: {
                show: true,
                position: 'top'
            }
        },
        color:['#fcc44b','#2f4554', '#61a0a8', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074', '#546570', '#c4ccd3'],

        xAxis: {
            data: ["初中以下","初中","高中","中专","大专","本科","硕士","硕士以上"],
            axisTick: {
                alignWithLabel: true
            },
            axisLabel:{
                interval:0,//横轴信息全部显示
                rotate:50,//倾斜显示 角度
                margin:10,//文字到x轴间距
                textStyle:{
                    color:'#666'
                },
            },
            axisLine:{
                lineStyle:{
                    color:'#f1f1f1'
                },
            }
        },
        yAxis: {
            axisLabel:{
                textStyle:{
                    color:'#666'
                },
            },
            axisTick: {
                alignWithLabel: true
            },
            axisLine:{
                lineStyle:{
                    color:'#f1f1f1'
                },
            }
        },
        series: [{
            name: '人数',
            type: 'bar',
            data: ageData,
            label: {
                normal: {
                    show: true,
                    position: 'top'
                }
            },
        }]
    };
    var genderOption={
        tooltip : {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },

        calculable : true,
        series : [
            {
                name:'男女比例',
                type:'pie',
                radius : ['50%', '70%'],
                itemStyle : {
                    normal : {
                        label : {
                            show : true
                        },
                        labelLine : {
                            show : true
                        }
                    },

                },
                data:[
                    {value:335, name:'男'},
                    {value:310, name:'女'},
                ]
            }
        ]

    }
    // 使用刚指定的配置项和数据显示图表。
    myAge.setOption(ageOption);
    myGender.setOption(genderOption);
    myEducation.setOption(educationOption);
</script>

{/block}