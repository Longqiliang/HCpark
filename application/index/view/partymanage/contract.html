{extend name="public/common"}

{block name="style"}
<title>合同管理</title>
<link rel="stylesheet" href="/index/css/partymanage/contract/index.css">
{/block}

{block name="body"}
<div id="app">
    <div class="header">
        <span>所属园区：</span>
        <select name="" id="" v-model="nowPark" @change="parkChange" v-if="baseData.isBoss=='yes'">
            <option :value="item.value" v-for="(item,key) in parks" >
                {{item.name}}
            </option>
        </select>
        <select   v-else>
            <option >
                希垦科技园
            </option>
        </select>
    </div>
    <div class="statistics-box">
        <div class="statistics-card">
            <div class="statistics-tit">合同类型统计</div>
            <div class="statistics-info" id="contract" ref="contractChart">

            </div>
        </div>
    </div>
    <div class="img-list">
        <a @click="jumpTo(1)">
            <div class="img-list-item">
                <img src="/index/images/service/lifepay/utilities.png"  class="img-responsive">
                <div class="item-img-marking"><span class="marking-info">租赁合同</span></div>
            </div>
        </a>
    </div>
    <div class="img-list">
        <a @click="jumpTo(2)">
            <div class="img-list-item">
                <img src="/index/images/service/lifepay/propertyfee.png" class="img-responsive">
                <div class="item-img-marking"><span class="marking-info">物业合同</span></div>
            </div>
        </a>
    </div>
    <div class="img-list">
        <a @click="jumpTo(3)">
            <div class="img-list-item">
                <img src="/index/images/service/lifepay/residentialrent.png" class="img-responsive">
                <div class="item-img-marking"><span class="marking-info">其他合同</span></div>
            </div>
        </a>
    </div>
</div>

{/block}

{block name="script"}
<script src="/static/echarts/echarts.min.1.js"></script>
<script>
console.log({$info});
    var app = new Vue({
        el:'#app',
        data:{
            chart:null,
            nowPark:0,
            info:{$info},
            parks:[
                {name:'希垦科技园',value:0},
                {name:'浙江互联网产业园',value:1},
                {name:'人工智能产业园',value:2}
            ],
            baseData:{
                isBoss:'yes'
            }
        },
        mounted(){
            this.initChart();
        },
        methods:{
            initChart(){
                var _this = this;
                _this.chart = echarts.init(_this.$refs.contractChart);
                var contractOption = {
                    title: {
                        text: _this.info.total.count,
                        subtext:_this.info.total.name,
                        x:"49%",
                        y:"28%",
                        textAlign: "center",
                        textStyle: {
                            fontWeight: 'normal',
                            fontSize: 15,
                            color: '#3ea1ff'
                        },
                        subtextStyle:{
                            color:"#333"
                        }
                    },
                    color:['#6ae7d4','#eda10e'],
                    legend: {
                        orient: 'horizontal',
                        selectedMode:false,
                        bottom:'5%',
                        itemGap:8,
                        data:[_this.info.rent.name,_this.info.property.name]
                    },
                    series: [
                        {
                            hoverAnimation:false,//取消hover动画
                            name:'合同类型统计',
                            type:'pie',
                            center:['50%',"40%"],
                            radius: ['40%', '55%'],
                            label: {
                                normal: {
                                    formatter: [`{c|{c}}`, `{b}`].join('\n'),
                                    rich:{
                                        c:{
                                            align:'center'
                                        }
                                    }
                                }
                            },
                            data:[
                                {value:_this.info.rent.count, name:_this.info.rent.name},
                                {value:_this.info.property.count, name:_this.info.property.name}
                            ]
                        }
                    ]
                };
                this.chart.setOption(contractOption);
            },
            jumpTo(type){
                window.location.href="/index/partymanage/managelist?type="+type;
            },
            //园区选择
            parkChange(){
                console.log("11");
                return;
                this.$http.post('',{value:this.nowPark}).then(function (res) {
                    console.log(res)
                })
            }
        }
    });
</script>
{/block}