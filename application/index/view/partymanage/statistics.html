{extend name="public/common"}

{block name="style"}
<title>园区统计</title>
<link rel="stylesheet" href="/index/css/personal/message.css">
<style>
    .my-tabs{
        display: -webkit-flex;
        display: flex;
        background: #fff;
        border:1px solid #0A96E6;
        color: #0A96E6;
        border-radius: 5px;
        overflow: hidden;
    }
    .my-tabs1{
        margin:1rem auto;
        width:20rem;
        height:3rem;
        font-size: 1.5rem;
        line-height: 3rem;
    }
    .my-tabs2{
        width:10rem;
        height:1.5rem;
        font-size: 1.3rem;
        line-height: 1.5rem;
        float: right;
    }
    .clear:after{
        content:"."; display:block; height:0; visibility:hidden; clear:both;
    }
    .my-tabs>li{
        width:50%;
        height:100%;
        text-align: center;
    }
    .my-tabs>li:not(:last-child){
        border-right: 1px solid #0A96E6;
    }
    .my-tabs>li.my-active{
        background-color: #0A96E6;
        color: #ffffff;
    }

    .my-park{
        display: -webkit-flex;
        display: flex;
        padding:0 3.2vw;
        height:5rem;
        align-items: center;
        justify-content: flex-end;
        font-size: 1.5rem;
        color: #666;
    }
    .my-park select{
        background-color: #fff;
        color: #666;
        height: 2.5rem;
        border-radius: 5px;
        font-size: 14px;
        border: 1px solid #e5e5e5;
        outline: none;
    }

    .my-box{
        border-bottom: 5px solid #f1f1f1;
        padding:3.2vw;

    }
    .my-title{
        font-size: 1.4rem;
    }


    /*样式覆盖*/
    .msg-lists>li>div.msg-text>.msg-title>.msg-title-text{
        width: 100%;
    }
</style>
{/block}

{block name="body"}
<div id="app">
    <ul class="my-tabs my-tabs1">
        <li :class="{'my-active':active=='tab-container1'}" @click="active = 'tab-container1'">园区统计</li>
        <li :class="{'my-active':active=='tab-container2'}" @click="active = 'tab-container2'">园区列表</li>
    </ul>
    <mt-tab-container v-model="active">
        <mt-tab-container-item id="tab-container1">
            <div class="my-park">
                    <span>当前：</span>
                    <select name="" id="" v-model="nowPark" @change="parkChange" v-if="baseData.isBoss=='yes'">
                        <option :value="item.value" v-for="(item,key) in parks" >
                            {{item.name}}
                        </option>
                    </select>
                    <select   v-else>
                        <option >
                            希垦科技园
                        </option>
                    </select>
            </div>
            <div class="my-box">
                <div class="my-title">园区基本信息统计</div>
                <!--<ul class="my-tabs my-tabs2">-->
                    <!--<li :class="{'my-active':active1=='1'}">月</li>-->
                    <!--<li :class="{'my-active':active1=='2'}">季</li>-->
                    <!--<li :class="{'my-active':active1=='3'}">年</li>-->
                <!--</ul>-->
                <!--<div  style="clear:both"></div>-->
                <div id="area" style="width: 100%;height:60vw;margin-bottom: 20px"></div>
                <div id="scale" style="width: 100%;height:60vw;"></div>
            </div>
            <div class="my-box">
                <div class="my-title">园区基本信息统计</div>
                <div id="types" style="width: 100%;height:60vw;"></div>
            </div>
        </mt-tab-container-item>
        <mt-tab-container-item id="tab-container2">
            <ul class="msg-lists">
                <li v-for="item in 3">
                <div :style="'background-image: url('+item.path+')'" class="msg-img"></div>
                <div class="msg-text">
                    <div class="msg-title"><span class="msg-title-text">希垦园区</span></div>
                    <div class="msg-info">余杭区文一西路1338号</div>
                </div>
                <!--<a href=""></a>-->
            </li>
            </ul>
        </mt-tab-container-item>
    </mt-tab-container>
</div>
{/block}

{block name="script"}
<script src="/static/echarts/echarts.min.1.js"></script>
<script>
var app = new Vue({
    el:'#app',
    data:{
        active:'tab-container1',
        nowPark:0,
        parks:[
            {name:'希垦科技园',value:0},
            {name:'浙江互联网产业园',value:1},
            {name:'人工智能产业园',value:2}
        ],
        baseData:{
            isBoss:'yes'
        },
        area:{
            id:'area',
            title:'总面积',
            subtext:"33000km²",
            label: '{c|{c}}km²\n{d|{d}%}',
            color:['#49CA91','#EDA10E'],
            legend:['已租面积','空置面积'],
            data:[
                {value:22000, name:'已租面积'},
                {value:11000, name:'空置面积'}
            ]
        },
        scale:{
            id:'scale',
            unit:'',
            title:'规模统计',
            subtext:"",
            label: '{c|{c}}km²\n{d|{d}%}',
            color:['#4CD2C4','#439BC4','#A1CDE1'],
            legend:['100平米以下','100-300平米','300-600平米'],
            data:[
                {value:5000, name:'100平米以下'},
                {value:6000, name:'100-300平米'},
                {value:4000, name:'300-600平米'},
            ]
        },
        types:{
            id:'types',
            title:'类型统计',
            subtext:"",
            label: '{c|{c}}\n{d|{d}%}',
            color:['#FB5E5E','#F4BDDC','#ff8866'],
            legend:['生活配套类','科技创新类','中介服务类'],
            data:[
                {value:10, name:'生活配套类'},
                {value:22, name:'科技创新类'},
                {value:33, name:'中介服务类'},
            ]
        }
    },
    mounted(){
        this.drawPie(this.area);
        this.drawPie(this.scale);
        this.drawPie(this.types)
    },
    methods:{
        //园区选择
        parkChange(){
            this.$http.post('',{value:this.nowPark}).then(function (res) {
                console.log(res)
            })
        },
        //饼图
        drawPie(data){
            var myChart = echarts.init(document.getElementById(data.id));
            var option = {
                title:{
                    show:true,
                    text: data.title,
                    subtext: data.subtext,
                    textStyle:{
                        fontSize:14,
                        color:'#299FE8',
                    },
                    subtextStyle:{
                        color:'#999',
                        align:'center'
                    },
                    left: 'center',
                    top:'92'
                },
                legend: {
                    orient: 'horizontal',
                    left:'center',
                    bottom:0,
                    data:data.legend
                },
                color:data.color,
                calculable: true,
                series: [
                    {
                        name:'园区面积',
                        type:'pie',
                        radius: ['45', '70'],
                        center:['50%',100],
                        avoidLabelOverlap: false,
                        hoverAnimation:false,//取消hover动画
                        label: {
                            normal: {
                                show: true,
                                formatter: data.label,
                                rich:{
                                    d:{
                                        align:'center',
                                        padding:2,
                                        color:'#999'

                                    },
                                    c:{
                                        align:'center',
                                        padding:[2,0],
                                    }
                                }
                            },
                            emphasis: {
                                show: true,
                            }
                        },
                        labelLine: {
                            normal: {
                                show: true,
                                length:15,
                                length2:5
                            }
                        },
                        data:data.data
                    }
                ]
            };
            myChart.setOption(option);
        }
    }
})

</script>
{/block}